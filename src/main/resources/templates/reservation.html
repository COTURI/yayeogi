<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>예약 페이지</title>
    <link rel="stylesheet" href="/css/reservation.css">
</head>
<body>
<header>
    <h1>예약 페이지</h1>
</header>
<main class="reservation-container">
    <div class="reservation-summary">
        <h2>나의 주문</h2>
        <p><span class="label">출발지:</span><span id="summary-origin">ICN</span></p>
        <p><span class="label">목적지:</span><span id="summary-destination">NRT</span></p>
        <p><span class="label">출발 날짜:</span><span id="summary-departureDate">2024-08-22</span></p>
        <p><span class="label">성인 수:</span><span id="summary-adults">1</span></p>
        <p><span class="label">항공사:</span><span id="summary-airlineName">YP</span></p>
        <p><span class="label">가격:</span><span id="summary-price">81450 KRW</span></p>
    </div>
    <form id="reservation-form">
        <h2>여행객 정보 입력</h2>
        <label for="name">이름:</label>
        <input type="text" id="name" name="name" required>
        <label for="email">이메일:</label>
        <input type="email" id="email" name="email" required>
        <label for="phone">전화번호:</label>
        <input type="tel" id="phone" name="phone" required>
        <button type="submit">예약하기</button>
    </form>
</main>
<script>
    let airports = {};
    let airlines = {};

    async function loadData() {
        try {
            const airportResponse = await fetch('/JS/airports.json');
            const airlineResponse = await fetch('/JS/airlines.json');

            if (!airportResponse.ok || !airlineResponse.ok) {
                throw new Error('데이터를 불러오는 데 문제가 발생했습니다.');
            }

            airports = await airportResponse.json();
            airlines = await airlineResponse.json();
        } catch (error) {
            console.error('데이터 불러오기 오류:', error);
        }
    }

    async function updateReservationSummary() {
        try {
            await loadData();

            const originCode = document.getElementById('summary-origin').textContent.trim();
            const destinationCode = document.getElementById('summary-destination').textContent.trim();
            const carrierCode = document.getElementById('summary-airlineName').textContent.trim();

            document.getElementById('summary-origin').textContent = airports[originCode] || originCode;
            document.getElementById('summary-destination').textContent = airports[destinationCode] || destinationCode;
            document.getElementById('summary-airlineName').textContent = airlines[carrierCode] || carrierCode;
        } catch (error) {
            console.error('예약 요약 업데이트 오류:', error);
        }
    }

    document.addEventListener('DOMContentLoaded', updateReservationSummary);
</script>
</body>
</html>
